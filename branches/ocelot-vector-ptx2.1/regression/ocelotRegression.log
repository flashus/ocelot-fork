INFO     Reading in test file /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/regression/ocelotRegressionTests.txt
INFO      Found the following tests:
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLexer
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestParser
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestEmulator
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestInstructions
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestKernels
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestDataflowGraph
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLLVMInstructions
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestPTXToLLVMTranslator
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLLVMKernels
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaMalloc
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaTexture2D
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaTextureArray
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaGlobals
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestDeviceSwitching
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaSequence
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCalVectorScale
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestPTXAssembly
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestFunctionCall
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestIndirectFunctionCall
INFO       /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestConvergence
INFO     ==== INDIVIDUAL TEST RESULTS ====

INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLexer -i ../tests/ptx 
INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestPTXToLLVMTranslator -i ../tests/ptx 
INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaTexture2D 
INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaMalloc 
INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestKernels 
INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestInstructions 
INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaGlobals 
INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCalVectorScale 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestPTXToLLVMTranslator
INFO     Test completed in 0.0257081985474 seconds
INFO      It produced the following output:
Pass/Fail : Pass


Name : TestPTXToLLVMTranslator

Description: This is a basic test that just tries to get through a 
             translation successfully of as many PTX programs as possible Test 
             Points: 1) Scan for all PTX files in a directory, try to 
             translate them.


Test Seed : 1305751871
Test time : 1.04904e-05

Status : 


INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLexer
INFO     Test completed in 0.0268659591675 seconds
INFO      It produced the following output:
Pass/Fail : Pass


Name : TestLexer

Description: Tests for the PTX lexer. Test Point 1: Scan a PTX file and 
             write out a temp stream, scan the stream again and make sure that the 
             two sets of tokens match


Test Seed : 1305751871
Test time : 1.38283e-05

Status : 


INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestParser -i ../tests/ptx 
INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestDataflowGraph -i ../tests/ptx 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaTexture2D
INFO     Test completed in 0.0327210426331 seconds
INFO      It produced the following output:
While deleting: void (float*, { { i32, i32, i32 }, { i32, i32, i32 }, { i32, i32, i32 }, { i32, i32, i32 }, i8*, i8*, i8*, i8*, i8*, i8* }*, i32, float, float)* %__ocelot_tex_2d_ff
Use still stuck around after Def is destroyed:  call void @__ocelot_tex_2d_ff(float* %floatingPointTexture, %LLVMContext* %__ctaContext, i32 0, float %r10, float %r11)
TestCudaTexture2D: Value.cpp:76: virtual llvm::Value::~Value(): Assertion `use_empty() && "Uses remain when a value is destroyed!"' failed.
(0.002838) LLVMDynamicExecutionManager.cpp:47:   Launching LLVM kernel '_Z6kernelPfii'.
(0.002862) LLVMDynamicTranslationCache.cpp:150:  LLVMDynamicTranslationCache::loadModule() - texture2D.cu
(0.003635) LLVMDynamicExecutionManager.cpp:60:     loaded. Executing grid 4, 4
(0.003647) LLVMDynamicExecutionManager.cpp:61:     block dim: 16, 16, 1
(0.003655) LLVMDynamicExecutionManager.cpp:62:     entry id: 0
(0.003664) LLVMDynamicExecutionManager.cpp:63:     local memory size: 208 bytes
(0.003672) LLVMDynamicExecutionManager.cpp:64:     shared memory size: 0 bytes 
(0.003680) LLVMDynamicExecutionManager.cpp:70:   Executing CTA 0, 0
(0.003693) LLVMDynamicExecutive.cpp:62:   CTA::initialize() - localMemorySize: 208, total threads: 256, shared memory size: 0
(0.003772) LLVMDynamicExecutionManager.cpp:84:   LLVMDynamicExecutionManager::getOrInsertTranslation( id: 0, warpsize: 2)
(0.003782) LLVMDynamicExecutionManager.cpp:98:   Locking dynamic execution manager
(0.005543) LLVMDynamicTranslationCache.cpp:1057: translated PTX to LLVM

INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaTextureArray 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCalVectorScale
INFO     Test completed in 0.0280578136444 seconds
INFO      It produced the following output:
No CAL devices found
Pass/Fail : Pass

INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestIndirectFunctionCall 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaGlobals
INFO     Test completed in 0.0304918289185 seconds
INFO      It produced the following output:
cudaSetDevice() - 0 - Ocelot Dynamic Multicore CPU Backend (LLVM-JIT) 
(0.002878) LLVMDynamicExecutionManager.cpp:47:   Launching LLVM kernel 'copyFromGlobal'.
(0.002903) LLVMDynamicTranslationCache.cpp:150:  LLVMDynamicTranslationCache::loadModule() - global.cu
(0.003586) LLVMDynamicExecutionManager.cpp:60:     loaded. Executing grid 1, 1
(0.003598) LLVMDynamicExecutionManager.cpp:61:     block dim: 64, 1, 1
(0.003608) LLVMDynamicExecutionManager.cpp:62:     entry id: 0
(0.003616) LLVMDynamicExecutionManager.cpp:63:     local memory size: 152 bytes
(0.003624) LLVMDynamicExecutionManager.cpp:64:     shared memory size: 0 bytes 
(0.003633) LLVMDynamicExecutionManager.cpp:70:   Executing CTA 0, 0
(0.003646) LLVMDynamicExecutive.cpp:62:   CTA::initialize() - localMemorySize: 152, total threads: 64, shared memory size: 0
(0.003671) LLVMDynamicExecutionManager.cpp:84:   LLVMDynamicExecutionManager::getOrInsertTranslation( id: 0, warpsize: 2)
(0.003679) LLVMDynamicExecutionManager.cpp:98:   Locking dynamic execution manager
(0.005228) LLVMDynamicTranslationCache.cpp:1057: translated PTX to LLVM
==Ocelot== Ocelot Dynamic Multicore CPU Backend (LLVM-JIT) failed to run kernel "copyFromGlobal" with exception: 
==Ocelot== LLVM Verifier failed for kernel: copyFromGlobal : "Referencing global in another module!
==Ocelot==   %rt6.t0 = bitcast float* @Pi to float*
==Ocelot== Referencing global in another module!
==Ocelot==   %rt6.t1 = bitcast float* @Pi to float*
==Ocelot== Instruction does not dominate all uses!
==Ocelot==   %rt6.t0 = bitcast float* @Pi to float*
==Ocelot==   %r13.t0 = load float* %rt6.t0, align 4
==Ocelot== Instruction does not dominate all uses!
==Ocelot==   %rt6.t1 = bitcast float* @Pi to float*
==Ocelot==   %r13.t1 = load float* %rt6.t1, align 4
==Ocelot== Instruction does not dominate all uses!
==Ocelot==   %r13.t0 = load float* %rt6.t0, align 4
==Ocelot==   %32 = insertelement <2 x float> undef, float %r13.t0, i32 0
==Ocelot== Instruction does not dominate all uses!
==Ocelot==   %32 = insertelement <2 x float> undef, float %r13.t0, i32 0
==Ocelot==   %33 = insertelement <2 x float> %32, float %r13.t1, i32 1
==Ocelot== Instruction does not dominate all uses!
==Ocelot==   %33 = insertelement <2 x float> %32, float %r13.t1, i32 1
==Ocelot==   %34 = fmul <2 x float> %31, %33
==Ocelot== Instruction does not dominate all uses!
==Ocelot==   %34 = fmul <2 x float> %31, %33
==Ocelot==   %35 = extractelement <2 x float> %34, i32 0
==Ocelot== Instruction does not dominate all uses!
==Ocelot==   %34 = fmul <2 x float> %31, %33
==Ocelot==   %36 = extractelement <2 x float> %34, i32 1
==Ocelot== Instruction does not dominate all uses!
==Ocelot==   %35 = extractelement <2 x float> %34, i32 0
==Ocelot==   store float %35, float* %rt11.t0, align 4
==Ocelot== Instruction does not dominate all uses!
==Ocelot==   %36 = extractelement <2 x float> %34, i32 1
==Ocelot==   store float %36, float* %rt11.t1, align 4
==Ocelot== Broken module found, compilation terminated.
==Ocelot== Broken module found, compilation terminated.
==Ocelot== "
terminate called after throwing an instance of 'hydrazine::Exception'
  what():  LLVM Verifier failed for kernel: copyFromGlobal : "Referencing global in another module!
  %rt6.t0 = bitcast float* @Pi to float*
Referencing global in another module!
  %rt6.t1 = bitcast float* @Pi to float*
Instruction does not dominate all uses!
  %rt6.t0 = bitcast float* @Pi to float*
  %r13.t0 = load float* %rt6.t0, align 4
Instruction does not dominate all uses!
  %rt6.t1 = bitcast float* @Pi to float*
  %r13.t1 = load float* %rt6.t1, align 4
Instruction does not dominate all uses!
  %r13.t0 = load float* %rt6.t0, align 4
  %32 = insertelement <2 x float> undef, float %r13.t0, i32 0
Instruction does not dominate all uses!
  %32 = insertelement <2 x float> undef, float %r13.t0, i32 0
  %33 = insertelement <2 x float> %32, float %r13.t1, i32 1
Instruction does not dominate all uses!
  %33 = insertelement <2 x float> %32, float %r13.t1, i32 1
  %34 = fmul <2 x float> %31, %33
Instruction does not dominate all uses!
  %34 = fmul <2 x float> %31, %33
  %35 = extractelement <2 x float> %34, i32 0
Instruction does not dominate all uses!
  %34 = fmul <2 x float> %31, %33
  %36 = extractelement <2 x float> %34, i32 1
Instruction does not dominate all uses!
  %35 = extractelement <2 x float> %34, i32 0
  store float %35, float* %rt11.t0, align 4
Instruction does not dominate all uses!
  %36 = extractelement <2 x float> %34, i32 1
  store float %36, float* %rt11.t1, align 4
Broken module found, compilation terminated.
Broken module found, compilation terminated.
"

INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaSequence 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestKernels
INFO     Test completed in 0.0376491546631 seconds
INFO      It produced the following output:
Pass/Fail : Pass


Name : TestKernels

Description: 


Test Seed : 1305751871
Test time : 0.0118282

Status : Test output:
looping kernel succeeded
matrix vector kernel succeeded



INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestConvergence 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestInstructions
INFO     Test completed in 0.0372722148895 seconds
INFO      It produced the following output:
Pass/Fail : Pass


Name : TestInstructions

Description: 


Test Seed : 1305751871
Test time : 0.00158906

Status : Test output:
Accessors test passed.
pass: load and store instructions
Abs test passed.
pass: arithmetic instructions
pass: exotic arithmetic instructions
pass: floating-point instructions
pass: logical instructions
pass: comparison instructions
pass: predicated Add and Ld isntructions
pass: control flow instructions



INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestEmulator 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestDataflowGraph
INFO     Test completed in 0.022754907608 seconds
INFO      It produced the following output:
Pass/Fail : Pass


Name : TestDataflowGraph

Description: A test for the DataflowGraph class. Test Points: 1) 
             Generic: load PTX files, convert them into dataflow graphs, verify that 
             all live ranges spanning blocks are consistent. 2) SSA: convert to 
             ssa form, verify that no register is declared more than once. 3) 
             reverse SSA: convert to ssa then out of ssa, verify that all live 
             ranges spanning blocks are consistent.


Test Seed : 1305751871
Test time : 1.90735e-05

Status : Testing Generic Dataflow
 Test Passed
Testing SSA Dataflow
 Test Passed
Testing SSA then back Dataflow
 Test Passed



INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLLVMKernels 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestParser
INFO     Test completed in 0.0253829956055 seconds
INFO      It produced the following output:
Pass/Fail : Pass


Name : TestParser

Description: A test for the PTXParser class. Test Points: 1) Load a PTX file 
             and run it through the parser generating a module. Write the 
             module to an intermediate stream. Parse the stream again 
             generating a new module, compare both to make sure that they match.


Test Seed : 1305751871
Test time : 1.35899e-05

Status : 


INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestFunctionCall 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaMalloc
INFO     Test completed in 0.0557417869568 seconds
INFO      It produced the following output:
test_malloc(256, 128)
PASSED
test_mallocArray(256, 128)
checking results from last cudaMemcpyFromArray
PASSED
[1] mallocing pitch
[2] memcpying2d
[3] memcpying
[4] checking for errors
[5] mallocing
[6] memcpying
[7] memcpying
[8] final free
Pass/Fail : Pass

INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestPTXAssembly 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaTextureArray
INFO     Test completed in 0.0324029922485 seconds
INFO      It produced the following output:
While deleting: void (float*, { { i32, i32, i32 }, { i32, i32, i32 }, { i32, i32, i32 }, { i32, i32, i32 }, i8*, i8*, i8*, i8*, i8*, i8* }*, i32, float, float)* %__ocelot_tex_2d_ff
Use still stuck around after Def is destroyed:  call void @__ocelot_tex_2d_ff(float* %floatingPointTexture, %LLVMContext* %__ctaContext, i32 0, float %r10, float %r11)
TestCudaTextureArray: Value.cpp:76: virtual llvm::Value::~Value(): Assertion `use_empty() && "Uses remain when a value is destroyed!"' failed.
(0.002026) LLVMDynamicExecutionManager.cpp:47:   Launching LLVM kernel '_Z6kernelPfii'.
(0.002051) LLVMDynamicTranslationCache.cpp:150:  LLVMDynamicTranslationCache::loadModule() - textureArray.cu
(0.002513) LLVMDynamicExecutionManager.cpp:60:     loaded. Executing grid 4, 4
(0.002521) LLVMDynamicExecutionManager.cpp:61:     block dim: 16, 16, 1
(0.002526) LLVMDynamicExecutionManager.cpp:62:     entry id: 0
(0.002531) LLVMDynamicExecutionManager.cpp:63:     local memory size: 208 bytes
(0.002535) LLVMDynamicExecutionManager.cpp:64:     shared memory size: 0 bytes 
(0.002540) LLVMDynamicExecutionManager.cpp:70:   Executing CTA 0, 0
(0.002548) LLVMDynamicExecutive.cpp:62:   CTA::initialize() - localMemorySize: 208, total threads: 256, shared memory size: 0
(0.002607) LLVMDynamicExecutionManager.cpp:84:   LLVMDynamicExecutionManager::getOrInsertTranslation( id: 0, warpsize: 2)
(0.002617) LLVMDynamicExecutionManager.cpp:98:   Locking dynamic execution manager
(0.004421) LLVMDynamicTranslationCache.cpp:1057: translated PTX to LLVM

INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLLVMInstructions 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestEmulator
INFO     Test completed in 0.0235998630524 seconds
INFO      It produced the following output:
Pass/Fail : Pass


Name : TestEmulator

Description: 


Test Seed : 1305751871
Test time : 0.00305557

Status : Test output:
10 registers
Register test passed
Load test passed
Store test passed
no errors
Full kernel test passed



INFO     Running test program /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestDeviceSwitching 
INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestIndirectFunctionCall
INFO     Test completed in 0.0339159965515 seconds
INFO      It produced the following output:
TestIndirectFunctionCall: ocelot/executive/implementation/LLVMDynamicTranslationCache.cpp:1020: void executive::setupCallTargets(ir::PTXKernel&, const executive::LLVMDynamicTranslationCache&): Assertion `0 && "arbitrary function calls not yet supported"' failed.
(0.004121) LLVMDynamicExecutionManager.cpp:47:   Launching LLVM kernel 'kernelEntry'.
(0.004143) LLVMDynamicTranslationCache.cpp:150:  LLVMDynamicTranslationCache::loadModule() - indirectCall.cu
(0.006562) LLVMDynamicExecutionManager.cpp:60:     loaded. Executing grid 1, 1
(0.006576) LLVMDynamicExecutionManager.cpp:61:     block dim: 32, 1, 1
(0.006585) LLVMDynamicExecutionManager.cpp:62:     entry id: 65536
(0.006593) LLVMDynamicExecutionManager.cpp:63:     local memory size: 216 bytes
(0.006601) LLVMDynamicExecutionManager.cpp:64:     shared memory size: 0 bytes 
(0.006609) LLVMDynamicExecutionManager.cpp:70:   Executing CTA 0, 0
(0.006625) LLVMDynamicExecutive.cpp:62:   CTA::initialize() - localMemorySize: 216, total threads: 32, shared memory size: 0
(0.006649) LLVMDynamicExecutionManager.cpp:84:   LLVMDynamicExecutionManager::getOrInsertTranslation( id: 65536, warpsize: 2)
(0.006659) LLVMDynamicExecutionManager.cpp:98:   Locking dynamic execution manager

INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestFunctionCall
INFO     Test completed in 0.027302980423 seconds
INFO      It produced the following output:
TestFunctionCall: ocelot/executive/implementation/LLVMDynamicTranslationCache.cpp:1020: void executive::setupCallTargets(ir::PTXKernel&, const executive::LLVMDynamicTranslationCache&): Assertion `0 && "arbitrary function calls not yet supported"' failed.
(0.002815) LLVMDynamicExecutionManager.cpp:47:   Launching LLVM kernel 'kernel'.
(0.002842) LLVMDynamicTranslationCache.cpp:150:  LLVMDynamicTranslationCache::loadModule() - simpleFunc.cu
(0.003854) LLVMDynamicExecutionManager.cpp:60:     loaded. Executing grid 1, 1
(0.003866) LLVMDynamicExecutionManager.cpp:61:     block dim: 32, 1, 1
(0.003875) LLVMDynamicExecutionManager.cpp:62:     entry id: 65536
(0.003883) LLVMDynamicExecutionManager.cpp:63:     local memory size: 112 bytes
(0.003891) LLVMDynamicExecutionManager.cpp:64:     shared memory size: 0 bytes 
(0.003899) LLVMDynamicExecutionManager.cpp:70:   Executing CTA 0, 0
(0.003912) LLVMDynamicExecutive.cpp:62:   CTA::initialize() - localMemorySize: 112, total threads: 32, shared memory size: 0
(0.003931) LLVMDynamicExecutionManager.cpp:84:   LLVMDynamicExecutionManager::getOrInsertTranslation( id: 65536, warpsize: 2)
(0.003939) LLVMDynamicExecutionManager.cpp:98:   Locking dynamic execution manager

INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestConvergence
INFO     Test completed in 0.0445971488953 seconds
INFO      It produced the following output:
(0.001759) LLVMDynamicExecutionManager.cpp:47:   Launching LLVM kernel 'convergence'.
(0.001779) LLVMDynamicTranslationCache.cpp:150:  LLVMDynamicTranslationCache::loadModule() - TestConvergence.cu
(0.002060) LLVMDynamicExecutionManager.cpp:60:     loaded. Executing grid 1, 1
(0.002067) LLVMDynamicExecutionManager.cpp:61:     block dim: 4, 1, 1
(0.002072) LLVMDynamicExecutionManager.cpp:62:     entry id: 0
(0.002077) LLVMDynamicExecutionManager.cpp:63:     local memory size: 72 bytes
(0.002081) LLVMDynamicExecutionManager.cpp:64:     shared memory size: 0 bytes 
(0.002086) LLVMDynamicExecutionManager.cpp:70:   Executing CTA 0, 0
(0.002095) LLVMDynamicExecutive.cpp:62:   CTA::initialize() - localMemorySize: 72, total threads: 4, shared memory size: 0
(0.002103) LLVMDynamicExecutionManager.cpp:84:   LLVMDynamicExecutionManager::getOrInsertTranslation( id: 0, warpsize: 2)
(0.002108) LLVMDynamicExecutionManager.cpp:98:   Locking dynamic execution manager
(0.002926) LLVMDynamicTranslationCache.cpp:1057: translated PTX to LLVM
(0.005092) LLVMDynamicTranslationCache.cpp:1239: performed transformations
(0.006933) LLVMDynamicTranslationCache.cpp:131:  inserting translation 0 with 72 bytes of local memory
(0.006947) LLVMDynamicExecutionManager.cpp:103:  Unlocking dynamic execution manager
Pass/Fail : Pass

INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaSequence
INFO     Test completed in 0.057765007019 seconds
INFO      It produced the following output:
Loaded libcuda.so explicitly; unloading now.
A_host = 0x2854120
A_gpu = 0x2853200
(0.009619) LLVMDynamicExecutionManager.cpp:47:   Launching LLVM kernel 'sequence'.
(0.009634) LLVMDynamicTranslationCache.cpp:150:  LLVMDynamicTranslationCache::loadModule() - sequence.cu
(0.012528) LLVMDynamicExecutionManager.cpp:60:     loaded. Executing grid 1, 1
(0.012547) LLVMDynamicExecutionManager.cpp:61:     block dim: 4, 1, 1
(0.012556) LLVMDynamicExecutionManager.cpp:62:     entry id: 262144
(0.012564) LLVMDynamicExecutionManager.cpp:63:     local memory size: 96 bytes
(0.012573) LLVMDynamicExecutionManager.cpp:64:     shared memory size: 0 bytes 
(0.012582) LLVMDynamicExecutionManager.cpp:70:   Executing CTA 0, 0
(0.012595) LLVMDynamicExecutive.cpp:62:   CTA::initialize() - localMemorySize: 96, total threads: 4, shared memory size: 0
(0.012613) LLVMDynamicExecutionManager.cpp:84:   LLVMDynamicExecutionManager::getOrInsertTranslation( id: 262144, warpsize: 2)
(0.012622) LLVMDynamicExecutionManager.cpp:98:   Locking dynamic execution manager
(0.014515) LLVMDynamicTranslationCache.cpp:1057: translated PTX to LLVM
(0.018631) LLVMDynamicTranslationCache.cpp:1239: performed transformations
(0.022448) LLVMDynamicTranslationCache.cpp:131:  inserting translation 262144 with 96 bytes of local memory
(0.022463) LLVMDynamicExecutionManager.cpp:103:  Unlocking dynamic execution manager
cudaMemcpy(0x2854120, 0x2853200) - APP
(0.022498) LLVMDynamicExecutionManager.cpp:47:   Launching LLVM kernel 'testShr'.
(0.022507) LLVMDynamicExecutionManager.cpp:60:     loaded. Executing grid 1, 1
(0.022516) LLVMDynamicExecutionManager.cpp:61:     block dim: 4, 1, 1
(0.022523) LLVMDynamicExecutionManager.cpp:62:     entry id: 131072
(0.022530) LLVMDynamicExecutionManager.cpp:63:     local memory size: 184 bytes
(0.022537) LLVMDynamicExecutionManager.cpp:64:     shared memory size: 1024 bytes 
(0.022545) LLVMDynamicExecutionManager.cpp:70:   Executing CTA 0, 0
(0.022553) LLVMDynamicExecutive.cpp:62:   CTA::initialize() - localMemorySize: 184, total threads: 4, shared memory size: 1024
(0.022564) LLVMDynamicExecutionManager.cpp:84:   LLVMDynamicExecutionManager::getOrInsertTranslation( id: 131072, warpsize: 2)
(0.022572) LLVMDynamicExecutionManager.cpp:98:   Locking dynamic execution manager
(0.026163) LLVMDynamicTranslationCache.cpp:1057: translated PTX to LLVM
==Ocelot== Ocelot Dynamic Multicore CPU Backend (LLVM-JIT) failed to run kernel "testShr" with exception: 
==Ocelot== LLVM Verifier failed for kernel: testShr : "PHINode should have one entry for each predecessor of its parent basic block!
==Ocelot==   %r59.t0 = phi i32 [ %ri59.t0, %"$BB_5_0002_ws_2" ]
==Ocelot== Broken module found, compilation terminated.
==Ocelot== Broken module found, compilation terminated.
==Ocelot== "
terminate called after throwing an instance of 'hydrazine::Exception'
  what():  LLVM Verifier failed for kernel: testShr : "PHINode should have one entry for each predecessor of its parent basic block!
  %r59.t0 = phi i32 [ %ri59.t0, %"$BB_5_0002_ws_2" ]
Broken module found, compilation terminated.
Broken module found, compilation terminated.
"

INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestPTXAssembly
INFO     Test completed in 0.0389499664307 seconds
INFO      It produced the following output:
TestPTXAssembly: ocelot/analysis/implementation/LLVMUniformVectorization.cpp:1450: void analysis::LLVMUniformVectorization::Translation::updateSubkernelEntries(): Assertion `successor' failed.
(0.004457) LLVMDynamicExecutionManager.cpp:47:   Launching LLVM kernel 'test'.
(0.004480) LLVMDynamicTranslationCache.cpp:150:  LLVMDynamicTranslationCache::loadModule() - TestVectorElements-u32
(0.004846) LLVMDynamicExecutionManager.cpp:60:     loaded. Executing grid 1, 1
(0.004856) LLVMDynamicExecutionManager.cpp:61:     block dim: 1, 1, 1
(0.004864) LLVMDynamicExecutionManager.cpp:62:     entry id: 0
(0.004872) LLVMDynamicExecutionManager.cpp:63:     local memory size: 80 bytes
(0.004880) LLVMDynamicExecutionManager.cpp:64:     shared memory size: 0 bytes 
(0.004888) LLVMDynamicExecutionManager.cpp:70:   Executing CTA 0, 0
(0.004901) LLVMDynamicExecutive.cpp:62:   CTA::initialize() - localMemorySize: 80, total threads: 1, shared memory size: 0
(0.004915) LLVMDynamicExecutionManager.cpp:84:   LLVMDynamicExecutionManager::getOrInsertTranslation( id: 0, warpsize: 1)
(0.004923) LLVMDynamicExecutionManager.cpp:98:   Locking dynamic execution manager
(0.006286) LLVMDynamicTranslationCache.cpp:1057: translated PTX to LLVM
Stack dump:
0.	Running pass 'Ocelot LLVM Uniform Vectorization' on function '@_Z_ocelotTranslated_test_opt3_ws1'

INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLLVMKernels
INFO     Test completed in 0.0462250709534 seconds
INFO      It produced the following output:
TestLLVMKernels: ocelot/analysis/implementation/LLVMUniformVectorization.cpp:903: void analysis::LLVMUniformVectorization::Translation::handleDivergentBranch(analysis::LLVMUniformVectorization::DivergentBranch&): Assertion `divergent.handler && "Failed in finding existing divergence handler"' failed.
Stack dump:
0.	Running pass 'Function Pass Manager' on module '_Z17k_sequenceLoopingPfi'.
1.	Running pass 'Ocelot LLVM Uniform Vectorization' on function '@_Z_ocelotTranslated__Z17k_sequenceLoopingPfi'

INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLLVMInstructions
INFO     Test completed in 0.0303421020508 seconds
INFO      It produced the following output:
Pass/Fail : Pass


Name : TestLLVMInstructions

Description: A test for the assembly code generation and automatic 
             verfication of individual LLVM instructions. Test Points: 1) For each 
             instruction, generate several assembly strings using the 
             instruction's toString method, make sure that these pass the valid() 
             check, compare to references from the LLVM manual.


Test Seed : 1305751871
Test time : 0.000950575

Status :  Checked instruction "<result> = add i32 4, %var"
Add Instruction Passed
 Checked instruction "%ptr = alloca i32"
 Checked instruction "%ptr = alloca i32, i32 4"
 Checked instruction "%ptr = alloca i32, i32 4, align 1024"
 Checked instruction "%ptr = alloca i32, align 1024"
Alloca Instruction Passed
 Checked instruction "<result> = and i32 4, %var"
 Checked instruction "<result> = and i32 15, 40"
 Checked instruction "<result> = and i32 4, 8"
And Instruction Passed
 Checked instruction "<result> = ashr i32 4, 1"
 Checked instruction "<result> = ashr i8 -2, 1"
 Checked instruction "<result> = ashr < 2 x i32 > < i32 -2, i32 4 >, < i32 1, i32 3 >"
Ashr Instruction Passed
 Checked instruction "%X = bitcast i8 -1 to i8"
 Checked instruction "%Z = bitcast < 2 x i32 > %V to i64"
Bitcast Instruction Passed
 Checked instruction "br i1 %cond, label %IfEqual, label %IfUnequal"
Br Instruction Passed
 Checked instruction "%retval = call i32 @test(i32 %argc)"
 Checked instruction "call i32 (i8*, ...)* @printf(i8* %msg, i32 12, i8 42)"
 Checked instruction "%X = tail call i32 @foo()"
 Checked instruction "%Y = tail call fastcc i32 @foo()"
 Checked instruction "call void @foo(i8 97 signext)"
 Checked instruction "%r = call %struct.A @foo()"
 Checked instruction "call void @foo() noreturn"
 Checked instruction "%ZZ = call zeroext i32 @bar()"
Call Instruction Passed
 Checked instruction "%result = extractelement < 4 x i32 > %vec, i32 0"
Extractelement Instruction Passed
 Checked instruction "%result = extractvalue { i32, float } %agg, 0"
Extractvalue Instruction Passed
 Checked instruction "<result> = fadd float 0x4010000000000000, %var"
Fadd Instruction Passed
 Checked instruction "<result> = fcmp oeq float 0x4010000000000000, 0x4014000000000000"
 Checked instruction "<result> = fcmp one float 0x4010000000000000, 0x4014000000000000"
 Checked instruction "<result> = fcmp olt float 0x4010000000000000, 0x4014000000000000"
 Checked instruction "<result> = fcmp ueq float 0x3ff0000000000000, 0x4000000000000000"
Fcmp Instruction Passed
 Checked instruction "<result> = fdiv float 0x4010000000000000, %var"
Fdiv Instruction Passed
 Checked instruction "<result> = fmul float 0x4010000000000000, %var"
Fmul Instruction Passed
 Checked instruction "%X = fpext float 0x400921cac0000000 to double"
 Checked instruction "%Y = fpext float 0x3ff0000000000000 to float"
Fpext Instruction Passed
 Checked instruction "%X = fptosi double 0xc05ec00000000000 to i32"
Fptosi Instruction Passed
 Checked instruction "%X = fptoui double 0x405ec00000000000 to i32"
Fptoui Instruction Passed
 Checked instruction "%X = fptrunc double 0x405ec00000000000 to float"
Fptrunc Instruction Passed
 Checked instruction "free [ 4 x i8 ]* %array"
Free Instruction Passed
 Checked instruction "<result> = frem float 0x4010000000000000, %var"
Frem Instruction Passed
 Checked instruction "<result> = fsub float 0x0, %val"
Fsub Instruction Passed
 Checked instruction "%vptr = getelementptr { i32, < 2 x i8 > }* %svptr, i32 0, i32 1, i32 1"
 Checked instruction "%eptr = getelementptr [ 12 x i8 ]* %aptr, i32 0, i32 1"
Getelementptr Instruction Passed
 Checked instruction "<result> = icmp ne float* %X, %X"
Icmp Instruction Passed
 Checked instruction "%result = insertelement < 4 x i32 > %vec, i32 1, i32 0"
Insertelement Instruction Passed
 Checked instruction "%result = insertvalue { i32, float } %agg, i32 1, 0"
Insertvalue Instruction Passed
 Checked instruction "%Y = inttoptr i64 0 to i32*"
Inttoptr Instruction Passed
 Checked instruction "%retval = invoke i32 @Test(i32 15) to label %Continue unwind label %TestCleanup"
Invoke Instruction Passed
 Checked instruction "%val = load i32* %ptr"
Load Instruction Passed
 Checked instruction "<result> = lshr i8 -2, 1"
Lshr Instruction Passed
 Checked instruction "%array2 = malloc [ 12 x i8 ], i32 %size"
Malloc Instruction Passed
 Checked instruction "<result> = mul i32 4, %var"
Mul Instruction Passed
 Checked instruction "<result> = or i32 15, 40"
Or Instruction Passed
 Checked instruction "%indvar = phi i32 [ 0, %LoopHeader ], [ %nextindvar, %Loop ]"
Phi Instruction Passed
 Checked instruction "%Y = ptrtoint i32* %x to i64"
Prtoint Instruction Passed
 Checked instruction "ret void"
Ret Instruction Passed
 Checked instruction "<result> = sdiv i32 4, %var"
Sdiv Instruction Passed
 Checked instruction "%X = select i1 1, i8 17, i8 42"
Select Instruction Passed
 Checked instruction "%X = sext i8 -1 to i16"
Sext Instruction Passed
 Checked instruction "<result> = shl i32 1, 32"
Shl Instruction Passed
 Checked instruction "%result = shufflevector < 4 x i32 > %v1, < 4 x i32 > %v2, < 8 x i32 > < i32 0, i32 1, i32 2, i32 3, i32 4, i32 5, i32 6, i32 7 >"
ShuffleVector Instruction Passed
 Checked instruction "%X = sitofp i32 257 to float"
Sitofp Instruction Passed
 Checked instruction "<result> = srem i32 4, %var"
Srem Instruction Passed
 Checked instruction "store i32 3, i32* %ptr"
Store Instruction Passed
 Checked instruction "<result> = sub i32 4, %var"
Sub Instruction Passed
 Checked instruction "switch i32 %val, label %otherwise [ i32 0, label %onzero i32 1, label %onone i32 2, label %ontwo ]"
Switch Instruction Passed
 Checked instruction "%Y = trunc i32 123 to i1"
Trunc Instruction Passed
 Checked instruction "<result> = udiv i32 4, %var"
Udiv Instruction Passed
 Checked instruction "%Y = uitofp i8 -1 to double"
Uitofp Instruction Passed
 Checked instruction "unreachable"
Unreachable Instruction Passed
 Checked instruction "unwind"
Unwind Instruction Passed
 Checked instruction "<result> = urem i32 4, %var"
Urem Instruction Passed
 Checked instruction "%tmp = va_arg i8** %ap, i32"
VarArg Instruction Passed
 Checked instruction "<result> = xor i32 -1, %V"
Xor Instruction Passed
 Checked instruction "%X = zext i32 257 to i64"
Zext Instruction Passed



INFO     Test /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestDeviceSwitching
INFO     Test completed in 0.0304088592529 seconds
INFO      It produced the following output:
TestDeviceSwitching: ocelot/analysis/implementation/LLVMUniformVectorization.cpp:1450: void analysis::LLVMUniformVectorization::Translation::updateSubkernelEntries(): Assertion `successor' failed.
(0.001578) LLVMDynamicExecutionManager.cpp:47:   Launching LLVM kernel 'increment'.
(0.001603) LLVMDynamicTranslationCache.cpp:150:  LLVMDynamicTranslationCache::loadModule() - simpleKernels
(0.001886) LLVMDynamicExecutionManager.cpp:60:     loaded. Executing grid 1, 1
(0.001904) LLVMDynamicExecutionManager.cpp:61:     block dim: 1, 1, 1
(0.001913) LLVMDynamicExecutionManager.cpp:62:     entry id: 0
(0.001922) LLVMDynamicExecutionManager.cpp:63:     local memory size: 24 bytes
(0.001930) LLVMDynamicExecutionManager.cpp:64:     shared memory size: 0 bytes 
(0.001939) LLVMDynamicExecutionManager.cpp:70:   Executing CTA 0, 0
(0.001952) LLVMDynamicExecutive.cpp:62:   CTA::initialize() - localMemorySize: 24, total threads: 1, shared memory size: 0
(0.001965) LLVMDynamicExecutionManager.cpp:84:   LLVMDynamicExecutionManager::getOrInsertTranslation( id: 0, warpsize: 1)
(0.001974) LLVMDynamicExecutionManager.cpp:98:   Locking dynamic execution manager
(0.003064) LLVMDynamicTranslationCache.cpp:1057: translated PTX to LLVM
Stack dump:
0.	Running pass 'Ocelot LLVM Uniform Vectorization' on function '@_Z_ocelotTranslated_increment_opt3_ws1'

INFO     
Passing tests:
 (0.026s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestPTXToLLVMTranslator : Passed
 (0.028s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCalVectorScale : Passed
 (0.030s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLLVMInstructions : Passed
 (0.037s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestInstructions : Passed
 (0.023s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestDataflowGraph : Passed
 (0.027s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLexer : Passed
 (0.045s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestConvergence : Passed
 (0.056s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaMalloc : Passed
 (0.038s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestKernels : Passed
 (0.025s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestParser : Passed
 (0.024s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestEmulator : Passed

Failing tests:
 (0.058s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaSequence : Did not complete.
 (0.030s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaGlobals : Did not complete.
 (0.033s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaTexture2D : Did not complete.
 (0.030s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestDeviceSwitching : Did not complete.
 (0.034s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestIndirectFunctionCall : Did not complete.
 (0.039s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestPTXAssembly : Did not complete.
 (0.046s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestLLVMKernels : Did not complete.
 (0.027s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestFunctionCall : Did not complete.
 (0.032s) : /home/akerr/repositories/gpuocelot/branches/ocelot-vector-ptx2.1/TestCudaTextureArray : Did not complete.

